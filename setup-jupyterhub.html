
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Setting up JupyterHub &#8212; Zero to JupyterHub with Kubernetes 0.4 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Turning Off JupyterHub and Computational Resources" href="turn-off.html" />
    <link rel="prev" title="Setting up Helm" href="setup-helm.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class='prev-next-top'>
    
     <a class='left-prev' href="setup-helm.html" title="previous chapter">Previous</a>
     <a class='right-next' href="turn-off.html" title="next chapter">Next</a>
  <div style='clear:both;'></div>

  </div>

  
  <div class="section" id="setting-up-jupyterhub">
<span id="setup-jupyterhub"></span><h1>Setting up JupyterHub<a class="headerlink" href="#setting-up-jupyterhub" title="Permalink to this headline">¶</a></h1>
<p>Now that we have a <a class="reference external" href="create-k8s-cluster.html">Kubernetes cluster</a> and
<a class="reference external" href="setup-helm.html">helm</a> setup, we can begin setting up a JupyterHub.</p>
<div class="section" id="prepare-configuration-file">
<h2>Prepare configuration file<a class="headerlink" href="#prepare-configuration-file" title="Permalink to this headline">¶</a></h2>
<p>This step prepares a configuration file (config file). We will use the
<a class="reference external" href="https://en.wikipedia.org/wiki/YAML">YAML</a> file format to specify
JupyterHub’s configuration.</p>
<p>It’s important to save the config file in a safe place. The config file is
needed for future changes to JupyterHub’s settings.</p>
<p>For the following steps, use your favorite code editor. We’ll use the
<a class="reference external" href="https://en.wikipedia.org/wiki/GNU_nano">nano</a> editor as an example.</p>
<ol class="arabic">
<li><p class="first">Create a file called <code class="docutils literal"><span class="pre">config.yaml</span></code>. Using the nano editor, for example,
entering <code class="docutils literal"><span class="pre">nano</span> <span class="pre">config.yaml</span></code> at the terminal will start the editor and
open the config file.</p>
</li>
<li><p class="first">Create a random hex string to use as a security token. Run this command
in a terminal</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>openssl rand -hex <span class="m">32</span>
</pre></div>
</div>
<p>Copy the output for use in the next step</p>
</li>
<li><p class="first">Insert these lines into the <code class="docutils literal"><span class="pre">config.yaml</span></code> file. When editing YAML files,
use straight quotes and spaces and avoid using curly quotes or tabs.
Substitute <code class="docutils literal"><span class="pre">RANDOM_STRING</span></code> below with the output of <code class="docutils literal"><span class="pre">openssl</span> <span class="pre">rand</span> <span class="pre">-hex</span> <span class="pre">32</span></code>
from step 2.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">proxy</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">secretToken</span><span class="p p-Indicator">:</span> <span class="s">&quot;RANDOM_STRING&quot;</span>
</pre></div>
</div>
</li>
</ol>
<ol class="arabic simple" start="4">
<li>Save the <code class="docutils literal"><span class="pre">config.yaml</span></code> file. If using the nano editor, hit <code class="docutils literal"><span class="pre">Ctrl-X</span></code> and
make sure to answer ‘yes’ when it asks you to save.</li>
</ol>
</div>
<div class="section" id="install-jupyterhub">
<h2>Install JupyterHub<a class="headerlink" href="#install-jupyterhub" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Let’s add the JupyterHub <a class="reference external" href="https://github.com/kubernetes/helm/blob/master/docs/chart_repository.md">helm repository</a>
to your helm, so you can install JupyterHub from it. This makes it easy to refer to the JupyterHub chart
without having to use a long URL each time.</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">helm</span> <span class="n">repo</span> <span class="n">add</span> <span class="n">jupyterhub</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">jupyterhub</span><span class="o">.</span><span class="n">github</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">helm</span><span class="o">-</span><span class="n">chart</span><span class="o">/</span>
<span class="n">helm</span> <span class="n">repo</span> <span class="n">update</span>
</pre></div>
</div>
<p>This should show output like:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span>Hang tight while we grab the latest from your chart repositories...
...Skip local chart repository
...Successfully got an update from the &quot;stable&quot; chart repository
...Successfully got an update from the &quot;jupyterhub&quot; chart repository
Update Complete. ⎈ Happy Helming!⎈
</pre></div>
</div>
</li>
<li><p class="first">Now you can install the chart! Run this command from the directory that contains the
<code class="docutils literal"><span class="pre">config.yaml</span></code> file to spin up JupyterHub:</p>
<div class="code bash highlight-default"><div class="highlight"><pre><span></span><span class="n">helm</span> <span class="n">install</span> <span class="n">jupyterhub</span><span class="o">/</span><span class="n">jupyterhub</span> \
    <span class="o">--</span><span class="n">version</span><span class="o">=</span><span class="n">v0</span><span class="o">.</span><span class="mi">5</span> \
    <span class="o">--</span><span class="n">name</span><span class="o">=&lt;</span><span class="n">YOUR</span><span class="o">-</span><span class="n">RELEASE</span><span class="o">-</span><span class="n">NAME</span><span class="o">&gt;</span> \
    <span class="o">--</span><span class="n">namespace</span><span class="o">=&lt;</span><span class="n">YOUR</span><span class="o">-</span><span class="n">NAMESPACE</span><span class="o">&gt;</span> \
    <span class="o">-</span><span class="n">f</span> <span class="n">config</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">--name</span></code> is an identifier used by helm to refer to this deployment.
You need it when you are changing the configuration of this install
or deleting it. Use something descriptive that you will easily
remember. For a class called <em>data8</em> you might wish set the name to
<strong>data8-jupyterhub</strong>. In the future you can find out the name by
using <code class="docutils literal"><span class="pre">helm</span> <span class="pre">list</span></code>.</li>
<li><code class="docutils literal"><span class="pre">--namespace</span></code>  is an identifier
<a class="reference external" href="https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/">used by Kubernetes</a>
(among other things) to identify a particular application that might
be running on a single Kubernetes cluster. You can install many
applications into the same Kubernetes cluster, and each instance of
an application is usually separated by being in its own namespace.
You’ll need the namespace identifier for performing any commands
with <code class="docutils literal"><span class="pre">kubectl</span></code>.</li>
</ul>
<p>We recommend providing the same value to <code class="docutils literal"><span class="pre">--name</span></code> and <code class="docutils literal"><span class="pre">--namespace</span></code>
for now to avoid too much confusion, but advanced users of Kubernetes and
helm should feel free to use different values.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you get a <code class="docutils literal"><span class="pre">release</span> <span class="pre">named</span> <span class="pre">&lt;YOUR-RELEASE-NAME&gt;</span> <span class="pre">already</span> <span class="pre">exists</span></code> error, then
you should delete the release by running
<code class="docutils literal"><span class="pre">helm</span> <span class="pre">delete</span> <span class="pre">--purge</span> <span class="pre">&lt;YOUR-RELEASE-NAME&gt;</span></code>. Then reinstall by repeating this
step. If it persists, also do <code class="docutils literal"><span class="pre">kubectl</span> <span class="pre">delete</span> <span class="pre">&lt;YOUR-NAMESPACE&gt;</span></code> and try again.</p>
<p class="last">If you’re pulling from a large Docker image you may get a
<code class="docutils literal"><span class="pre">Error:</span> <span class="pre">timed</span> <span class="pre">out</span> <span class="pre">waiting</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">condition</span></code> error,
add a <code class="docutils literal"><span class="pre">--timeout=SOME-LARGE-NUMBER</span></code>
parameter to the <code class="docutils literal"><span class="pre">helm</span> <span class="pre">install</span></code> command.</p>
</div>
</li>
</ol>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">--version</span></code> parameter corresponds to the <em>version of the helm chart</em>,
not the version of JupyterHub. Each version of the JupyterHub helm chart
is paired with a specific version of JupyterHub. E.g., v0.5 of the helm
chart runs JupyterHub v0.8.</p>
</div>
</div></blockquote>
<ol class="arabic" start="2">
<li><p class="first">While Step 1 is running, you can see the pods being created by entering in
a different terminal:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>kubectl --namespace<span class="o">=</span>&lt;YOUR_NAMESPACE&gt; get pod
</pre></div>
</div>
</li>
<li><p class="first">Wait for the hub and proxy pod to begin running.</p>
</li>
<li><p class="first">You can find the IP to use for accessing the JupyterHub with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>kubectl --namespace<span class="o">=</span>&lt;YOUR_NAMESPACE&gt; get svc
</pre></div>
</div>
<p>The external IP for the <code class="docutils literal"><span class="pre">proxy-public</span></code> service should be accessible in a
minute or two.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If the IP for <code class="docutils literal"><span class="pre">proxy-public</span></code> is too long to fit into the window, you
can find the longer version by calling:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">kubectl</span> <span class="o">--</span><span class="n">namespace</span><span class="o">=&lt;</span><span class="n">YOUR_NAMESPACE</span><span class="o">&gt;</span> <span class="n">describe</span> <span class="n">svc</span> <span class="n">proxy</span><span class="o">-</span><span class="n">public</span>
</pre></div>
</div>
</div>
</li>
<li><p class="first">To use JupyterHub, enter the external IP for the <code class="docutils literal"><span class="pre">proxy-public</span></code> service in
to a browser. JupyterHub is running with a default <em>dummy</em> authenticator so
entering any username and password combination will let you enter the hub.</p>
</li>
</ol>
<p>Congratulations! Now that you have JupyterHub running, you can
<a class="reference external" href="extending-jupyterhub.html">extend it</a> in many ways. You can use a pre-built
image for the user container, build your own image, configure different
authenticators, and more!</p>
</div>
</div>


  <div class='prev-next-bottom'>
    
     <a class='left-prev' href="setup-helm.html" title="previous chapter">Setting up Helm</a>
     <a class='right-next' href="turn-off.html" title="next chapter">Turning Off JupyterHub and Computational Resources</a>
  <div style='clear:both;'></div>

  </div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="index.html">Zero to JupyterHub with Kubernetes</a></h1>



<p class="blurb">A tutorial to help install and manage JupyterHub with Kubernetes</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=jupyterhub&repo=zero-to-jupyterhub-k8s&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<h3>Table of Contents</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started with JupyterHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="create-k8s-cluster.html">Creating a Kubernetes Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup-helm.html">Setting up Helm</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setting up JupyterHub</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prepare-configuration-file">Prepare configuration file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-jupyterhub">Install JupyterHub</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="turn-off.html">Turning Off JupyterHub and Computational Resources</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="extending-jupyterhub.html">Extending your JupyterHub setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-environment.html">Customizing the User Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-resources.html">User Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-management.html">User Management</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debugging Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="cost.html">Estimating costs</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Topics</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Helm Chart Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools used in a JupyterHub Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="additional-resources.html">Additional resources</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="http://github.com/jupyterhub/zero-to-jupyterhub-k8s/issues">Issue Tracker</a></li>
    
    <li class="toctree-l1"><a href="http://github.com/jupyterhub/zero-to-jupyterhub-k8s">GitHub Repo</a></li>
    
</ul>

<div class="relations">
<h3>Navigation</h3>
<ul>
  <li><a href="index.html">Documentation Home</a><ul>
  <li><a href="setup-helm.html" title="Previous">Previous topic</a></li>
  <li><a href="turn-off.html" title="Next">Next topic</a></li>
  </ul>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/setup-jupyterhub.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Project Jupyter team.
      
      |
      <a href="_sources/setup-jupyterhub.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>