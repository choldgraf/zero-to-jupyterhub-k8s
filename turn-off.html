
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Turning Off JupyterHub and Computational Resources &#8212; Zero to JupyterHub with Kubernetes 0.4 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/custom.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Extending your JupyterHub setup" href="extending-jupyterhub.html" />
    <link rel="prev" title="Setting up JupyterHub" href="setup-jupyterhub.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class='prev-next-top'>
    
     <a class='left-prev' href="setup-jupyterhub.html" title="previous chapter">Previous</a>
     <a class='right-next' href="extending-jupyterhub.html" title="next chapter">Next</a>
  <div style='clear:both;'></div>

  </div>

  
  <div class="section" id="turning-off-jupyterhub-and-computational-resources">
<span id="turn-off"></span><h1>Turning Off JupyterHub and Computational Resources<a class="headerlink" href="#turning-off-jupyterhub-and-computational-resources" title="Permalink to this headline">¶</a></h1>
<p>When you are done with your hub, you should delete it so you are no longer
paying money for it. The following sections describe how to delete your
JupyterHub resources on various cloud providers.</p>
<p>Tearing down your JupyterHub entails:</p>
<ol class="arabic simple">
<li>Deleting your Kubernetes namespace, which deletes all objects created and managed by Kubernetes</li>
<li>Deleting any computational resources you’ve requested from the cloud provider</li>
<li>Running a final check to make sure there aren’t any lingering resources that haven’t been deleted
(e.g., storage volumes in some cloud providers)</li>
</ol>
<div class="section" id="for-all-cloud-providers">
<h2>For all cloud providers<a class="headerlink" href="#for-all-cloud-providers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="delete-the-helm-namespace">
<span id="delete-namespace"></span><h3>Delete the helm namespace<a class="headerlink" href="#delete-the-helm-namespace" title="Permalink to this headline">¶</a></h3>
<p>The steps in this section must be performed for all cloud providers first,
before doing the cloud provider specific setup.</p>
<ol class="arabic simple">
<li>First, delete the helm release. This deletes all resources that were created
by helm to make your jupyterhub.</li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>helm delete &lt;YOUR-HELM-RELEASE-NAME&gt; --purge
</pre></div>
</div>
</div></blockquote>
<ol class="arabic" start="2">
<li><p class="first">Next, delete the namespace the hub was installed in. This deletes any disks
that may have been created to store user’s data, and any IP addresses that
may have been provisioned.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl delete namespace &lt;YOUR-NAMESPACE&gt;
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="google-cloud-platform">
<h2>Google Cloud Platform<a class="headerlink" href="#google-cloud-platform" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Perform the steps in <a class="reference internal" href="#delete-namespace"><span class="std std-ref">Delete the helm namespace</span></a>. These cloud provider agnostic steps will
delete the helm chart and delete the hub’s namespace. This must be done before proceeding.</p>
</li>
<li><p class="first">Delete the kubernetes cluster. You can list all the clusters you have.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcloud container clusters list
</pre></div>
</div>
<p>You can then delete the one you want.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcloud container clusters delete &lt;CLUSTER-NAME&gt; --zone<span class="o">=</span>&lt;CLUSTER-ZONE&gt;
</pre></div>
</div>
</li>
<li><p class="first">Double check to make sure all the resources are now deleted, since anything you
have not deleted will cost you money! You can check the <a class="reference external" href="https://console.cloud.google.com">web console</a>
(make sure you are in the right project and account) to verify that everything
has been deleted.</p>
<p>At a minimum, check the following under the Hamburger (left top corner) menu:</p>
<ol class="arabic simple">
<li>Compute Engine -&gt; Disks</li>
<li>Container Engine -&gt; Container Clusters</li>
<li>Container Registry -&gt; Images</li>
<li>Networking -&gt; Network Services -&gt; Load Balancing</li>
</ol>
<p>These might take several minutes to clear up, but they shouldn’t have anything
related to your JupyterHub cluster after you have deleted the cluster.</p>
</li>
</ol>
</div>
<div class="section" id="microsoft-azure-aks">
<h2>Microsoft Azure AKS<a class="headerlink" href="#microsoft-azure-aks" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Perform the steps in <a class="reference internal" href="#delete-namespace"><span class="std std-ref">Delete the helm namespace</span></a>. These cloud provider agnostic steps will
delete the helm chart and delete the hub’s namespace. This must be done before proceeding.</p>
</li>
<li><p class="first">Delete your resource group. You can list your active resource groups with
the following command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>az group list --output table
</pre></div>
</div>
<p>You can then delete the one you want with the following command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>az group delete --name &lt;YOUR-GROUP-NAME&gt;
</pre></div>
</div>
<p>Be careful to delete the correct Resource Group, as doing so will irreversibly
delete all resources within the group!</p>
</li>
<li><p class="first">Double check to make sure all the resources are now deleted, since anything you
have not deleted will cost you money! You can check the <a class="reference external" href="https://portal.azure.com">web portal</a>
(check the “Resource Groups” page) to verify that everything has been deleted.</p>
<p>These might take several minutes to clear up, but they shouldn’t have anything
related to your JupyterHub cluster after you have deleted the resource group.</p>
</li>
</ol>
</div>
<div class="section" id="amazon-web-services-aws">
<h2>Amazon Web Services (AWS)<a class="headerlink" href="#amazon-web-services-aws" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Perform the steps in <a class="reference internal" href="#delete-namespace"><span class="std std-ref">Delete the helm namespace</span></a>. These cloud provider agnostic steps will
delete the helm chart and delete the hub’s namespace. This must be done before proceeding.</li>
<li>on CI host:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kops delete cluster &lt;CLUSTER-NAME&gt; --yes
<span class="nb">exit</span> <span class="c1">#(leave CI host)</span>
Terminicate CI Host
aws ec2 stop-instances --intance-ids &lt;aws-instance id of CI HOST&gt;
aws ec2 terminate-instances --instance-ids &lt;aws-instance id of CI HOST&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">cluster name was set as an env var aka: <code class="docutils literal notranslate"><span class="pre">NAME=&lt;somename&gt;.k8s.local</span></code>
Stoping the CI host will still incure disk storage and Ip address costs,
but the host can be restarted at a later date to resume using.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Sometimes AWS fails to delete parts of the stack on a first pass. Be sure
to double-check that your stack has in fact been deleted, and re-perform
the actions above if needed.</p>
</div>
</div>
</div>


  <div class='prev-next-bottom'>
    
     <a class='left-prev' href="setup-jupyterhub.html" title="previous chapter">Setting up JupyterHub</a>
     <a class='right-next' href="extending-jupyterhub.html" title="next chapter">Extending your JupyterHub setup</a>
  <div style='clear:both;'></div>

  </div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="index.html">Zero to JupyterHub with Kubernetes</a></h1>



<p class="blurb">A tutorial to help install and manage JupyterHub with Kubernetes</p>









<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3>Table of Contents</h3>
<p class="caption"><span class="caption-text">Step Zero: your Kubernetes cluster</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="create-k8s-cluster.html">Creating a Kubernetes Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="google/step-zero-gcp.html">Step Zero: Kubernetes on Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="microsoft/step-zero-azure.html">Step Zero: Kubernetes on Microsoft Azure Container Service (AKS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="amazon/step-zero-aws.html">Step Zero: Kubernetes on Amazon Web Services (AWS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="redhat/step-zero-openshift.html">JupyterHub on Red Hat OpenShift</a></li>
</ul>
<p class="caption"><span class="caption-text">Creating your JupyterHub</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started with JupyterHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup-helm.html">Setting up Helm</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup-jupyterhub.html">Setting up JupyterHub</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Turning Off JupyterHub and Computational Resources</a></li>
</ul>
<p class="caption"><span class="caption-text">Customization Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="extending-jupyterhub.html">Extending your JupyterHub setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-environment.html">Customizing the User Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-resources.html">User Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-storage.html">User storage in JupyterHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-management.html">User Management</a></li>
</ul>
<p class="caption"><span class="caption-text">Administrator Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">The JupyterHub Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debugging Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimization.html">Speed and Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrading.html">Upgrading your JupyterHub Kubernetes deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="cost.html">Appendix: Projecting deployment costs</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources from the community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="additional-resources.html">Community-authored documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="users-list.html">Zero to JupyterHub Gallery of Deployments</a></li>
<li class="toctree-l1"><a class="reference internal" href="tips.html">Tips and command snippets</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Helm Chart Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference-docs.html">Official JupyterHub and Project Jupyter Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools used in a JupyterHub Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="http://github.com/jupyterhub/zero-to-jupyterhub-k8s">GitHub Repo</a></li>
    
    <li class="toctree-l1"><a href="http://github.com/jupyterhub/zero-to-jupyterhub-k8s/issues">Issue Tracker</a></li>
    
</ul>

<div class="relations">
<h3>Navigation</h3>
<ul>
  <li><a href="index.html">Documentation Home</a><ul>
  <li><a href="setup-jupyterhub.html" title="Previous">Previous topic</a></li>
  <li><a href="extending-jupyterhub.html" title="Next">Next topic</a></li>
  </ul>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/turn-off.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Project Jupyter team.
      
      |
      <a href="_sources/turn-off.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>